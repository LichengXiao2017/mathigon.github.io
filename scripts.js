/* (c) Mathigon, 2016 */
/* MIT License (https://github.com/Mathigon/mathigon.io/blob/master/LICENSE) */

"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();!function(){function a(){var a=arguments.length<=0||void 0===arguments[0]?10:arguments[0];return Math.random().toString(36).substr(2,a)}function b(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;b>d;d++)c[d-1]=arguments[d];var e=!0,f=!1,g=void 0;try{for(var h,i=c[Symbol.iterator]();!(e=(h=i.next()).done);e=!0){var j=h.value;if(a===j)return!0}}catch(k){f=!0,g=k}finally{try{!e&&i["return"]&&i["return"]()}finally{if(f)throw g}}return!1}function c(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;b>d;d++)c[d-1]=arguments[d];var e=!0,f=!1,g=void 0;try{for(var h,i=c[Symbol.iterator]();!(e=(h=i.next()).done);e=!0){var j=h.value;for(var k in j)j.hasOwnProperty(k)&&(a[k]=j[k])}}catch(l){f=!0,g=l}finally{try{!e&&i["return"]&&i["return"]()}finally{if(f)throw g}}return a}function d(){var a=void 0,b=void 0,c=new Promise(function(c,d){a=c,b=d});return c["catch"](function(a){return a}),{promise:c,resolve:a,reject:b}}function e(a){var b=new Map;return function(){for(var c=arguments.length,d=Array(c),e=0;c>e;e++)d[e]=arguments[e];var f=d.join("--");return b.has(f)||b.set(f,a.apply(void 0,d)),b.get(f)}}function f(a,b){var c=!1,d=!1;return function(){for(var e=arguments.length,f=Array(e),g=0;e>g;g++)f[g]=arguments[g];c?d=!0:(a.apply(null,f),c=!0,setTimeout(function(){d&&a.apply(void 0,f),c=!1,d=!1},b))}}function g(a,b){return this.filter(function(a){return a!==b})}function h(a,b){return b.lowercase&&(a=a.toLowerCase()),a.split(b.split).map(function(a){return a.trim()})}function i(a){return a.trim().split(/\s+/)}function j(a){return a.toLowerCase().replace(/^-/,"").replace(/-(.)/g,function(a,b){return b.toUpperCase()})}function k(a){return a instanceof String||"string"==typeof a}function l(a,b){function c(){g&&(!b||b>=f)&&window.requestAnimationFrame(c),f=Date.now()-e,a(b?Math.min(1,f/b):f),b&&f>=b&&h.resolve()}var e=Date.now(),f=0,g=!0,h=d(),i=h.promise.then.bind(h.promise);return c(),{cancel:function(){g=!1,h.reject()},then:i}}function m(a){var b=arguments.length<=1||void 0===arguments[1]?0:arguments[1],c=arguments.length<=2||void 0===arguments[2]?0:arguments[2];switch(a){case"quad":return b*b;case"cubic":return b*b*b;case"quart":return b*b*b*b;case"quint":return b*b*b*b*b;case"circ":return 1-Math.sqrt(1-b*b);case"sine":return 1-Math.cos(b*Math.PI/2);case"exp":return 0>=b?0:Math.pow(2,10*(b-1));case"back":return null==c&&(c=1.70158),b*b*((c+1)*b-c);case"elastic":return null==c&&(c=.3),-Math.pow(2,10*(b-1))*Math.sin((2*(b-1)/c-.5)*Math.PI);case"swing":return.5-Math.cos(b*Math.PI)/2;case"spring":return 1-Math.cos(4.5*b*Math.PI)*Math.exp(6*-p);case"bounce":return 1/11>b?1/64-7.5625*(.5/11-b)*(.5/11-b):3/11>b?1/16-7.5625*(2/11-b)*(2/11-b):7/11>b?.25-7.5625*(5/11-b)*(5/11-b):1-7.5625*(1-b)*(1-b);default:return b}}function n(a){var b=arguments.length<=1||void 0===arguments[1]?0:arguments[1],c=arguments.length<=2||void 0===arguments[2]?0:arguments[2];return 0===b?0:1===b?1:(a=a.split("-"),"in"===a[1]?m(a[0],b,c):"out"===a[1]?1-m(a[0],1-b,c):.5>=b?m(a[0],2*b,c)/2:1-m(a[0],2*(1-b),c)/2)}function o(a){var b=window.getComputedStyle(a._el);if("all 0s ease 0s"===b.getPropertyValue("transition"))return[];for(var c=b.getPropertyValue("transition-delay").split(","),d=b.getPropertyValue("transition-duration").split(","),e=b.getPropertyValue("transition-property").split(","),f=b.getPropertyValue("transition-timing-function").match(/[^\(\),]+(\([^\(\)]*\))?[^\(\),]*/g)||[],g=[],h=0;h<e.length;++h)g.push({css:e[h].trim(),delay:R(c[h]),duration:R(d[h]),timing:f[h]});return g}function q(a,b){var c=b.map(function(a){return[a.css,(a.duration||1e3)+"ms",a.timing||"linear",(a.delay||0)+"ms"].join(" ")});a.css("transition",c.join(", "))}function r(a,b){function e(){h=!0,a.css("transition",j);var c=window.getComputedStyle(a._el);b.forEach(function(b){a.css(b.css,c.getPropertyValue(b.css))}),N(),f.reject()}Array.isArray(b)||(b=[b]);var f=d(),g=f.promise.then.bind(f.promise),h=!1;a._data._animation&&a._data._animation.cancel();var i=window.getComputedStyle(a._el);b.forEach(function(b){null!=b.from?a.css(b.css,b.from):"height"===b.css?a.css("height",parseFloat(i.getPropertyValue("height"))):"width"===b.css&&a.css("width",parseFloat(i.getPropertyValue("width")))});var j=i.getPropertyValue("transition").replace("all 0s ease 0s","");return q(a,c(o(a),b)),N(),b.forEach(function(b){a.css(b.css,b.to)}),a.transitionEnd(function(){h||(a.css("transition",j),N(),f.resolve())}),a._data._animation={cancel:e,then:g}}function s(a){var b=arguments.length<=1||void 0===arguments[1]?400:arguments[1],c=arguments.length<=2||void 0===arguments[2]?"fade":arguments[2],d=arguments.length<=3||void 0===arguments[3]?0:arguments[3];a.show();var e=void 0;if("fade"===c)e=r(a,{css:"opacity",from:0,to:1,duration:b});else if("pop"===c){var f=a.transform.replace(/scale\([0-9\.]*\)/,""),g=f+" scale(0.5)",h=f+" scale(1)";e=r(a,[{css:ta("transform"),from:g,to:h,delay:d,duration:b,timing:"cubic-bezier(0.175, 0.885, 0.32, 1.275)"},{css:"opacity",from:0,to:1,delay:d,duration:b}])}else if("draw"===c){var i=a.strokeLength;a.css({opacity:1,"stroke-dasharray":i+" "+i}),e=r(a,{css:"stroke-dashoffset",from:i,to:0,delay:d,duration:b}),e.then(function(){a.css("stroke-dasharray","")})}return e}function t(a){var b=arguments.length<=1||void 0===arguments[1]?400:arguments[1],c=arguments.length<=2||void 0===arguments[2]?"fade":arguments[2],d=arguments.length<=3||void 0===arguments[3]?0:arguments[3];if("none"!=a.css("display")){var e=void 0;if("fade"===c)e=r(a,{css:"opacity",from:1,to:0,delay:d,duration:b});else if("pop"===c){var f=a.transform.replace(/scale\([0-9\.]*\)/,""),g=f+" scale(1)",h=f+" scale(0.5)";e=r(a,[{css:ta("transform"),from:g,to:h,delay:d,duration:b,timing:"cubic-bezier(0.68, -0.275, 0.825, 0.115)"},{css:"opacity",from:1,to:0,delay:d,duration:b}])}else if("draw"===c){var i=a.getStrokeLength();a.css("stroke-dasharray",i+" "+i),e=r(a,{css:"stroke-dashoffset",from:0,to:i,delay:d,duration:b})}return e.then(function(){a.hide()}),e}}function u(a,b){a.animationEnd(function(){a.removeClass("effects-"+b)}),a.addClass("effects-"+b)}function v(a){return{x:a.touches?a.touches[0].clientX:a.clientX,y:a.touches?a.touches[0].clientY:a.clientY}}function w(a){if(!a._events._click){a._events._click=!0;var b=!1,c=void 0,d=void 0,e=!1;a._el.addEventListener("mousedown",function(a){e||(b=!0,c=a.clientX,d=a.clientY)}),a._el.addEventListener("mouseup",function(f){if(e)return void(e=!1);if(b){var g=f.clientX,h=f.clientY;Math.abs(g-c)<2&&Math.abs(h-d)<2&&a.trigger("fastClick",f)}b=!1}),a._el.addEventListener("touchstart",function(a){e=!0,1===a.touches.length&&(b=!0,c=a.changedTouches[0].clientX,d=a.changedTouches[0].clientY)}),a._el.addEventListener("touchend",function(e){if(b&&1===e.changedTouches.length){var f=e.changedTouches[0].clientX,g=e.changedTouches[0].clientY;Math.abs(f-c)<5&&Math.abs(g-d)<5&&a.trigger("fastClick",e)}b=!1}),a._el.addEventListener("touchcancel",function(){b=!1})}}function x(a){a._events._clickOutside||(a._events._clickOutside=!0,ja.on("click",function(b){I(b.target).hasParent(a)||a.trigger("clickOutside")}))}function y(a,b){var c=v(b);return a._el===document.elementFromPoint(c.x,c.y)}function z(a){if(!a._data._pointerEvents){a._data._pointerEvents=!0;var b=a.parent,c=null;b.on("pointerEnd",function(a){c=null}),b.on("pointerMove",function(b){var d=c;c=y(a,b),null!=d&&c&&!d&&a.trigger("pointerEnter",b),!c&&d&&a.trigger("pointerLeave",b),c&&a.trigger("pointerOver",b)})}}function A(a){function b(){c&&window.requestAnimationFrame(b),a()}var c=!0;return b(),{stop:function(){c=!1}}}function B(a){function b(){var b=a.scrollTop;Math.abs(b-j)>1?(g&&window.clearTimeout(g),g=null,a.trigger("scroll",{top:b}),j=b):g||(g=window.setTimeout(d,100))}function c(c){h||0===c.deltaY||(h=!0,j=a.scrollTop,i=A(b),a.trigger("scrollstart"))}function d(){h&&(h=!1,i.stop(),a.trigger("scrollend"))}function e(){window.addEventListener("touchmove",c),window.addEventListener("touchend",f)}function f(){window.removeEventListener("touchmove",c),window.removeEventListener("touchend",f)}if(!a._data._scrollEvents){a._data._scrollEvents=!0;var g=null,h=!1,i=void 0,j=void 0;a._isWindow||a.fixOverflowScroll();var k=a._isWindow?window:a._el;k.addEventListener("wheel",c),a._el.addEventListener("touchstart",e)}}function C(a,b,c,d){var e=da[b];k(e)?a.on(e,c,d):e?e(a):a._el.addEventListener(b,c,!!d),b in a._events?a._events[b].indexOf(c)<0&&a._events[b].push(c):a._events[b]=[c]}function D(a,b,c,d){var e=da[b];return k(e)?void a.off(e,c,d):(e||a._el.removeEventListener(b,c,!!d),void(b in a._events&&(a._events[b]=g(a._events[b],c))))}function E(a){var b=a.replace(/"/g,'"');b=b.replace(/\$\{([^\}]+)\}/g,function(a,b){return'" + ('+b+') + "'});try{return new Function("_vars",'try {\n            with(_vars) { return "'+b+'" }\n        } catch(e) {\n            if (!(e instanceof ReferenceError)) console.warn(e);\n            return "";\n        }')}catch(c){return console.warn("WHILE PARSING: ",a,"\n",c),function(){return""}}}function F(a,b,c){var d=arguments.length<=3||void 0===arguments[3]?c:arguments[3];if(!(c[b].indexOf("${")<0)){var e=E(c[b]);a.change(function(){d[b]=e(a)}),d[b]=e(a)}}function G(a,b){var c=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],d=a.attributes;if(d)for(var e=0;e<d.length;++e){var f=d[e].name.match(/^x-/)?document.createAttribute(d[e].name.replace(/^x-/,"")):d[e];F(b,"value",d[e],f),f!=d[e]&&a.setAttributeNode(f)}if(a.children&&a.children.length){var g=!0,h=!1,i=void 0;try{for(var j,k=a.childNodes[Symbol.iterator]();!(g=(j=k.next()).done);g=!0){var l=j.value;l instanceof Text?F(b,"textContent",l):c||l.isCustomElement||G(l,b)}}catch(m){h=!0,i=m}finally{try{!g&&k["return"]&&k["return"]()}finally{if(h)throw i}}}else a.innerHTML&&a.innerHTML.trim()&&F(b,"innerHTML",a)}function H(a,b){return parseFloat(a.css(b))}function I(a){var b=arguments.length<=1||void 0===arguments[1]?ia:arguments[1];return"string"==typeof a&&(a=b._el.querySelector(a)),a instanceof Node||a===window?a._el||new ga(a):null}function J(a){var b=arguments.length<=1||void 0===arguments[1]?ia:arguments[1],c=b._el.getElementsByTagName(a);return c.length?new ga(c[0]):null}function K(a){var b=arguments.length<=1||void 0===arguments[1]?ia:arguments[1],c=b._el.querySelectorAll(a);return Array.from(c,function(a){return new ga(a)})}function L(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],c=arguments.length<=2||void 0===arguments[2]?null:arguments[2],d=ha.indexOf(a)<0?document.createElement(a):document.createElementNS("http://www.w3.org/2000/svg",a);for(var e in b)"id"===e?d.id=b.id:"html"===e?d.innerHTML=b.html:d.setAttribute(e,b[e]);var f=new ga(d);return c&&c.append(f),f}function M(a){var b=L("div",{html:a});return b.children()}function N(){document.body.offsetHeight}function O(){var a=arguments.length<=0||void 0===arguments[0]?null:arguments[0];a?ka.on("resize",a):(na=window.innerWidth,oa=window.innerHeight,ka.trigger("resize",{width:na,height:oa}))}function P(){qa=!0;var a=!0,b=!1,c=void 0;try{for(var d,e=pa[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){var f=d.value;f()}}catch(g){b=!0,c=g}finally{try{!a&&e["return"]&&e["return"]()}finally{if(b)throw c}}}function Q(a){qa?a():pa.push(a)}function R(a){var b=/^([\-\+]?[0-9]+(\.[0-9]+)?)(m?s)$/,c=b.exec(a.trim());return null===c?null:+c[1]*("s"===c[3]?1e3:1)}function S(a){var b=document.createElement("style");b.type="text/css",b.innerHTML=a,document.head.appendChild(b)}function T(a,b){var c=document.styleSheets[document.styleSheets.length-1],d=c.cssRules.length-1;c.insertRule?c.insertRule(a+"{"+b+"}",d):c.addRule(a,b,d)}function U(){for(var a=document.cookie.split(";"),b={},c=0,d=a.length;d>c;++c){var e=a[c].split("=");e[0]=e[0].replace(/^\s+|\s+$/,""),b[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return b}function V(a){var b=document.cookie.match(new RegExp("(^|;) ?"+a+"=([^;]*)(;|$)"));return b?b[2]:null}function W(a,b){var c=arguments.length<=2||void 0===arguments[2]?31536e3:arguments[2];document.cookie=a+"="+b+";path=/;max-age="+c}function X(a){W(a,"",-1)}function Y(a,b){for(var c=(a||"").split("."),d=JSON.parse(window.localStorage.getItem(ua))||{},e=d,f=0;f<c.length-1;++f)null==e[c[f]]&&(e[c[f]]={}),e=e[c[f]];e[c[c.length-1]]=b,window.localStorage.setItem("M",JSON.stringify(d))}function Z(a){for(var b=(a||"").split("."),c=JSON.parse(window.localStorage.getItem(ua))||{},d=c,e=0;e<b.length-1;++e){if(null==d[b[e]])return null;d=d[b[e]]}return a?d[b[b.length-1]]:d}function $(a){a?Y(a,null):window.localStorage.setItem(ua,"")}function _(){var a=document.activeElement;return a===document.body?void 0:a}function aa(a,b){a=i(a).map(function(a){return va[a]||a}),document.addEventListener("keydown",function(c){_()||a.indexOf(c.keyCode)>=0&&b(c)})}function ba(a,b,c,d){var e=!1;a=va[a]||a,b=va[b]||b,document.addEventListener("keydown",function(f){if(!_()){var g=f.keyCode;g===b?e=!0:e&&g===a?d(f):g===a&&c(f)}}),document.addEventListener("keyup",function(a){var c=a.keyCode;c===b&&(e=!1)})}var ca=function(){function a(){var b=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=b.split,d=void 0===c?" ":c,e=b.lowecase,f=void 0===e?!1:e;_classCallCheck(this,a),this._options={split:d,lowecase:f},this._events={}}return _createClass(a,[{key:"on",value:function(a,b){var c=(arguments.length<=2||void 0===arguments[2]?0:arguments[2],!0),d=!1,e=void 0;try{for(var f,g=h(a,this._options)[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var i=f.value;i in this._events||(this._events[i]=[]),this._events[i].push(b)}}catch(j){d=!0,e=j}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}}},{key:"one",value:function(a,b){function c(){d.off(a,c),b.apply(void 0,arguments)}var d=this;this.on(a,c)}},{key:"off",value:function(a,b){var c=!0,d=!1,e=void 0;try{for(var f,g=h(a,this._options)[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var i=f.value;i in this._events&&(this._events[i]=this._events[i].filter(function(a){return a!==b}))}}catch(j){d=!0,e=j}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}}},{key:"trigger",value:function(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;b>d;d++)c[d-1]=arguments[d];var e=!0,f=!1,g=void 0;try{for(var i,j=h(a,this._options)[Symbol.iterator]();!(e=(i=j.next()).done);e=!0){var k=i.value;k in this._events&&this._events[k].forEach(function(a){a.apply(this,c)})}}catch(l){f=!0,g=l}finally{try{!e&&j["return"]&&j["return"]()}finally{if(f)throw g}}}}]),a}(),da={pointerStart:"mousedown touchstart",pointerMove:"mousemove touchmove",pointerEnd:"mouseup touchend mousecancel touchcancel",change:"propertychange keyup input paste",scrollwheel:"DOMMouseScroll mousewheel",fastClick:w,clickOutside:x,pointerEnter:z,pointerLeave:z,pointerOver:z,scrollStart:B,scroll:B,scrollEnd:B},ea=window.Element.prototype,fa=ea.matches||ea.webkitMatchesSelector||ea.mozMatchesSelector||ea.msMatchesSelector,ga=function(){function c(a){_classCallCheck(this,c),this._el=a,this._isWindow=b(a,window,document.body,document.documentElement),this._data=a?a._m_data||(a._m_data={}):{},this._events=a?a._m_events||(a._m_events={}):{}}return _createClass(c,[{key:"addClass",value:function(a){var b=i(a);if(this._el.classList){var c=!0,d=!1,e=void 0;try{for(var f,g=b[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;this._el.classList.add(h)}}catch(j){d=!0,e=j}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}}else this._el.className+=" "+a}},{key:"removeClass",value:function(a){var b=i(a);if(this._el.classList){var c=!0,d=!1,e=void 0;try{for(var f,g=b[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;this._el.classList.remove(h)}}catch(j){d=!0,e=j}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}}else{var k=new RegExp("(^|\\s)"+b.join("|")+"(\\s|$)","gi");this._el.className=this._el.className.toString().replace(k," ")}}},{key:"hasClass",value:function(a){return(" "+this._el.className+" ").indexOf(" "+a.trim()+" ")>=0}},{key:"toggleClass",value:function(a){var b=i(a),c=!0,d=!1,e=void 0;try{for(var f,g=b[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;this._el.classList?this._el.classList.toggle(h):this[this.hasClass(h)?"removeClass":"addClass"](h)}}catch(j){d=!0,e=j}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}}},{key:"setClass",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?!0:arguments[1];b?this.addClass(a):this.removeClass(a)}},{key:"attr",value:function(a,b){return void 0===b?this._el.getAttribute(a):void(null===b?this._el.removeAttribute(a):this._el.setAttribute(a,b))}},{key:"hasAttribute",value:function(a){return this._el.hasAttribute(a)}},{key:"blur",value:function(){this._el.blur()}},{key:"focus",value:function(){this._el.focus()}},{key:"change",value:function(a){var b=this;this.on("change",function(){a(b.value)})}},{key:"offset",value:function(a){if(a._el===this._el.offsetParent){var b=this.offsetTop+a._el.clientTop,c=this.offsetLeft+a._el.clientLeft,d=b+this.height,e=c+this.width;return{top:b,left:c,bottom:d,right:e}}var f=a._el.getBoundingClientRect(),g=this._el.getBoundingClientRect();return{top:g.top-f.top,left:g.left-f.left,bottom:g.bottom-f.top,right:g.right-f.left}}},{key:"fixOverflowScroll",value:function(){var a=this;this._isWindow||this._data._fixOverflowScroll||(this._data._fixOverflowScroll=!0,this._el.addEventListener("touchstart",function(){var b=a.scrollTop,c=a.scrollHeight-a.height;0>=b&&(a.scrollTop=1),b>=c&&(a.scrollTop=c-1)}))}},{key:"scrollTo",value:function(b){function c(a){var b=h+i*n(e,a);f.scrollTop=b,f.trigger("scroll",{top:b,id:g})}var d=arguments.length<=1||void 0===arguments[1]?1e3:arguments[1],e=arguments.length<=2||void 0===arguments[2]?"cubic":arguments[2],f=this,g=a();0>b&&(b=0);var h=this.scrollTop,i=b-h;this.trigger("scrollStart");l(c,d)}},{key:"scrollBy",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?1e3:arguments[1],c=arguments.length<=2||void 0===arguments[2]?"cubic":arguments[2];this.scrollTo(this.scrollTop+a,b,c)}},{key:"css",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if(null==b){if("string"==typeof a)return window.getComputedStyle(this._el,null).getPropertyValue(a);for(var c in a)this._el.style[j(c)]=a[c]}else this._el.style[j(a)]=b}},{key:"transition",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?"1s":arguments[1],c=arguments.length<=2||void 0===arguments[2]?"ease-in-out":arguments[2];return 0===arguments.length?this._el.style[za.prefix("transition")]:("string"!=typeof b&&(b+="ms"),void(this._el.style[za.prefix("transition")]=a+" "+b+" "+c))}},{key:"translate",value:function(a,b){a=Math.round(+a||0),b=Math.round(+b||0),this._el.style[za.prefix("transform")]="translate("+a+"px,"+b+"px)"}},{key:"translateX",value:function(a){a=Math.round(+a||0),this._el.style[za.prefix("transform")]="translate("+a+"px,0)"}},{key:"translateY",value:function(a){a=Math.round(+a||0),this._el.style[za.prefix("transform")]="translate(0px,"+a+"px)"}},{key:"hide",value:function(){this.css("display","none"),this.css("visibility","hidden")}},{key:"show",value:function(){this.css("display","block"),this.css("visibility","visible")}},{key:"transitionEnd",value:function(a){this.one("webkitTransitionEnd transitionend",a)}},{key:"animationEnd",value:function(a){this.one("webkitAnimationEnd animationend",a)}},{key:"manipulate",value:function(a){var b=this._el.nextSibling,c=this._el.parentNode,d=document.createDocumentFragment();d.appendChild(this._el);var e=a.call(this)||this._el;b?c.insertBefore(e,b):c.appendChild(e)}},{key:"is",value:function(a){return fa?fa.call(this._el,a):[].indexOf.call(document.querySelectorAll(a),this._el)>-1}},{key:"index",value:function(){for(var a=0,b=this._el;null!==(b=b.previousSibling);)++a;return a}},{key:"prepend",value:function(a){var b=this._el.childNodes;if("string"==typeof a)for(var c=M(a),d=c.length-1;d>=0;--d)this._el.insertBefore(c[d],this._el.childNodes[0]);else b.length?this._el.insertBefore(a._el,b[0]):this._el.appendChild(a._el)}},{key:"append",value:function(a){if("string"==typeof a){var b=M(a),c=!0,d=!1,e=void 0;try{for(var f,g=b[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;this._el.appendChild(h._el)}}catch(i){d=!0,e=i}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}}else this._el.appendChild(a._el)}},{key:"insertBefore",value:function(a){var b=this.parent;if("string"==typeof a)for(var c=M(a),d=c.length-1;d>=0;--d)b._el.insertBefore(c[d]._el,this._el);else b._el.insertBefore(a._el,this._el)}},{key:"insertAfter",value:function(a){var b=this.parent;if("string"==typeof a){var c=M(a),d=!0,e=!1,f=void 0;try{for(var g,h=c[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){var i=g.value;b._el.insertAfter(this._el,i._el)}}catch(j){e=!0,f=j}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}}else{var k=this._el.nextSibling;k?b._el.insertBefore(a._el,k):b._el.appendChild(a._el)}}},{key:"wrap",value:function(a){return"string"==typeof a&&(a=L(a)),this.insertBefore(a),this.detach(),a.append(this),a}},{key:"moveTo",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];this.detach(),b?a.prepend(this):a.append(this)}},{key:"find",value:function(a){return I(a,this)}},{key:"findAll",value:function(a){return K(a,this)}},{key:"parents",value:function(a){for(var b=[],c=this.parent;c;)a&&!c.is(a)||b.push(c),c=c.parent;return b}},{key:"hasParent",value:function(a){for(var b=this._el.parentNode;b;){if(b===a._el)return!0;b=b.parentNode}return!1}},{key:"children",value:function(a){var b=this._el.children;if(b)return"number"==typeof a?I(b[a]):null==a?Array.from(b,function(a){return I(a)}):Array.from(b,function(a){return I(a)}).filter(function(b){return b.is(a)});var c=this._el.childNodes;return Array.from(c).filter(function(a){return!a.data||a.data.trim()}).map(function(a){return I(a)})}},{key:"detach",value:function(){this._el&&this._el.parentNode&&this._el.parentNode.removeChild(this._el)}},{key:"remove",value:function(){this.detach(),this._el=null}},{key:"clear",value:function(){for(;this._el.firstChild;)this._el.removeChild(this._el.firstChild)}},{key:"replace",value:function(a){this.insertAfter(a),this.remove()}},{key:"applyTemplate",value:function(a){if(!a)throw new Error("Template not found");this.clear();var b=document.importNode(a._el.content,!0);this._el.appendChild(b)}},{key:"on",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?null:arguments[1],c=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];if(null!=b){var d=!0,e=!1,f=void 0;try{for(var g,h=i(a)[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){var j=g.value;C(this,j,b,c)}}catch(k){e=!0,f=k}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}}else for(var j in a)C(this,j,a[j])}},{key:"one",value:function(a,b){function c(){e.off(a,c,d),b(a,b,d)}var d=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],e=this;this.on(a,c,d)}},{key:"off",value:function(a,b){var c=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],d=!0,e=!1,f=void 0;try{for(var g,h=i(a)[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){var j=g.value;D(this,j,b,c)}}catch(k){e=!0,f=k}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}}},{key:"trigger",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],c=!0,d=!1,e=void 0;try{for(var f,g=i(a)[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;if(!this._events[h])return;var j=!0,k=!1,l=void 0;try{for(var m,n=this._events[h][Symbol.iterator]();!(j=(m=n.next()).done);j=!0){var o=m.value;o.call(this,b)}}catch(p){k=!0,l=p}finally{try{!j&&n["return"]&&n["return"]()}finally{if(k)throw l}}}}catch(p){d=!0,e=p}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}}},{key:"onKeyDown",value:function(a,b){a=i(a).map(function(a){return za.keyCodes[a]||a}),this._el.addEventListener("keydown",function(c){a.indexOf(c.keyCode)>=0&&b(c)})}},{key:"toggleClick",value:function(a,b,c){a.watch(b,c),this.on("click",function(){a[b]=!a[b]})}},{key:"model",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];G(this._el,a,b)}},{key:"animate",value:function(a){return r(this,a)}},{key:"enter",value:function(a,b,c){return s(this,a,b,c)}},{key:"exit",value:function(a,b,c){return t(this,a,b,c)}},{key:"effect",value:function(a){u(this,a)}},{key:"fadeIn",value:function(a){return s(this,a,"fade")}},{key:"fadeOut",value:function(a){return t(this,a,"fade")}},{key:"slideUp",value:function(a){return this.animate({css:"height",to:0,duration:a})}},{key:"slideDown",value:function(a){var b=this,c=this.children(0).outerHeight,d=this.animate({css:"height",to:c+"px",duration:a});return d.then(function(){b.css("height","auto")}),d}},{key:"sticky",value:function(a){function b(b){var g=b.top,h=e-g<a.top;h&&!d?(d=!0,c.addClass("sticky-top"),f.show()):!h&&d&&(d=!1,c.removeClass("sticky-top"),f.hide())}var c=this,d=void 0,e=this.positionTop,f=L("div",{style:"height: "+this.height+"px; display: none;"});this.insertAfter(f),ja.on("scroll",b),za.resize(function(){b({top:ja.scrollTop})})}},{key:"addPoint",value:function(a){var b=this.attr("d")+" L "+a.x+","+a.y;this.attr("d",b)}},{key:"id",get:function(){return this._el.id}},{key:"value",get:function(){return this._el.value},set:function(a){this._el.value=a}},{key:"html",get:function(){return this._el.innerHTML},set:function(a){this._el.innerHTML=a}},{key:"text",get:function(){return this._el.textContent},set:function(a){this._el.textContent=a}},{key:"action",get:function(){return this._el.action}},{key:"formData",get:function(){for(var a={},b=this._el.elements,c=0;c<b.length;++c)a[b[c].name||b[c].id]=b[c].value;return a}},{key:"bounds",get:function(){return this._el.getBoundingClientRect()}},{key:"offsetTop",get:function(){return this._el.offsetTop}},{key:"offsetLeft",get:function(){return this._el.offsetLeft}},{key:"width",get:function(){return this._isWindow?window.innerWidth:this._el instanceof SVGElement?this.bounds.width:this._el.offsetWidth}},{key:"height",get:function(){return this._isWindow?window.innerHeight:this._el instanceof SVGElement?this.bounds.height:this._el.offsetHeight}},{key:"innerWidth",get:function(){return this._isWindow?window.innerWidth:this._el.clientWidth-H(this,"padding-left")-H(this,"padding-right")}},{key:"innerHeight",get:function(){return this._isWindow?window.innerHeight:this._el.clientHeight-H(this,"padding-bottom")-H(this,"padding-top")}},{key:"outerWidth",get:function(){return this._isWindow?window.outerWidth:this._el.offsetWidth+H(this,"margin-right")+H(this,"margin-left")}},{key:"outerHeight",get:function(){return this._isWindow?window.outerHeight:this._el.offsetHeight+H(this,"margin-top")+H(this,"margin-bottom")}},{key:"positionTop",get:function(){var a=this,b=0;do b+=a.offsetTop;while(a=a.offsetParent);return b}},{key:"positionLeft",get:function(){var a=this,b=0;do b+=a.offsetLeft;while(a=a.offsetParent);return b}},{key:"scrollWidth",get:function(){return this._isWindow?ja._el.scrollWidth:this._el.scrollWidth}},{key:"scrollHeight",get:function(){return this._isWindow?ja._el.scrollHeight:this._el.scrollHeight}},{key:"scrollTop",get:function(){return this._isWindow?window.pageYOffset:this._el.scrollTop},set:function(a){this._isWindow?document.body.scrollTop=document.documentElement.scrollTop=a:this._el.scrollTop=a,this.trigger("scroll",{top:a,left:this.scrollLeft})}},{key:"scrollLeft",get:function(){return this._isWindow?window.pageXOffset:this._el.scrollLeft},set:function(a){this._isWindow?document.body.scrollLeft=document.documentElement.scrollLeft=a:this._el.scrollLeft=a,this.trigger("scroll",{top:this.scrollTop,left:a})}},{key:"strokeLength",get:function(){if("getTotalLength"in this._el)return this._el.getTotalLength();var a=this.bounds;return 2*a.height+2*a.width}},{key:"transform",get:function(){return this._el.style[za.prefix("transform")].replace("none","")},set:function(a){this._el.style[za.prefix("transform")]=a}},{key:"transformMatrix",get:function(){var a=window.getComputedStyle(this._el).getPropertyValue(za.prefix("transform"));if(!a||"none"===a)return null;var b=a.match(/matrix\(([0-9\,\.\s]*)\)/);if(!b[1])return null;var c=b[1].split(",");return[[+c[0],+c[1]],[+c[2],+c[3]]]}},{key:"scale",get:function(){var a=this.transformMatrix;return a?[a[0][0],a[1][1]]:[1,1]}},{key:"next",get:function(){var a=this._el.nextSibling;return a?I(a):null}},{key:"prev",get:function(){var a=this._el.previousSibling;return a?I(a):null}},{key:"parent",get:function(){var a=this._el.parentNode;return a?I(a):null}},{key:"offsetParent",get:function(){var a=this._el.offsetParent;return a?I(a):null}},{key:"siblings",get:function(){var a=[],b=this._el.parentNode.firstChild;do a.push(I(b));while(b=b.nextSibling);return a}},{key:"childNodes",get:function(){var a=this._el.childNodes;return Array.from(a,function(a){return I(a)})}},{key:"points",get:function(){var a=this._el.attr("d").replace("M","").split("L");return a.map(function(a){var b=a.split(",");return{x:b[0],y:b[1]}})},set:function(a){var b=a.length?"M"+a.map(function(a){return a.x+","+a.y}).join("L"):"";this.attr("d",b)}},{key:"cursor",get:function(){if(!window.getSelection)return 0;var a=window.getSelection();if(a.rangeCount>0){var b=a.getRangeAt(0),c=b.cloneRange();return c.selectNodeContents(this._el),c.setEnd(b.endContainer,b.endOffset),c.toString().length}},set:function(a){for(var b=[this._el],c=this._el.childNodes[0];c;)if(c.childNodes.length)b.push(c),c=c.childNodes[0];else{if(!(a>c.length)){var d=document.createRange();d.setStart(c,a),d.collapse(!0);var e=window.getSelection();return e.removeAllRanges(),void e.addRange(d)}a-=c.length,c=c.nextSibling||b.pop().nextSibling}}}]),c}(),ha=["path","rect","circle","ellipse","polygon","polyline","g","defs","marker","line","text","pattern","mask","svg"],ia={_el:document},ja=new ga(document.body),ka=(J("html"),new ga(window),new ga(window.document.documentElement),new ca),la=window.navigator.userAgent,ma=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i,na=window.innerWidth,oa=window.innerHeight;window.onresize=f(function(){var a=window.innerWidth,b=window.innerHeight;na===a&&800>na&&800>b||(na=a,ka.trigger("resize",{width:na,height:b}))},100),setTimeout(O);var pa=[],qa=!1;window.onload=function(){qa||P(),O()},document.addEventListener("DOMContentLoaded",function(){O(),qa||P()});var ra=["webkit","Moz","ms","O"],sa=document.createElement("div").style,ta=e(function(a,b){var c=j(a);if(null!=sa[c])return b?a:c;c=c.toTitleCase();for(var d=0;d<ra.length;++d)if(null!=sa[ra[d]+c])return b?"-"+ra[d].toLowerCase()+"-"+a:ra[d]+c}),ua="_M",va={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,capslock:20,escape:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46},wa=!("hidden"in document)&&"webkitHidden"in document,xa=wa?"webkitHidden":"hidden",ya=wa?"webkitvisibilitychange":"visibilitychange";document.addEventListener(ya,function(){ka.trigger(document[xa]?"focus":"blur")});var za={isMobile:ma.test(navigator.userAgent.toLowerCase()),isRetina:(window.devicePixelRatio||1)>1,isTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,isChrome:window.chrome,isIE:la.indexOf("MSIE")>=0||la.indexOf("Trident")>=0,redraw:N,ready:Q,resize:O,cssTimeToNumber:R,addCSS:S,addCSSRule:T,prefix:ta,on:ka.on.bind(ka),off:ka.off.bind(ka),trigger:ka.trigger.bind(ka),get width(){return na},get height(){return oa},get cookies(){return U()},getCookie:V,setCookie:W,deleteCookie:X,setStorage:Y,getStorage:Z,deleteStorage:$,get activeInput(){return _()},keyCodes:va,
onKey:aa,onMultiKey:ba};za.ready(function(){function a(a){var b=!0,c=!1,d=void 0;try{for(var e,f=h[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value;if(g[0]>a)return g}}catch(i){c=!0,d=i}finally{try{!b&&f["return"]&&f["return"]()}finally{if(c)throw d}}}var b=I("#body"),c=I(".sidebar"),d=I(".sidebar-wrap"),e=void 0,f=void 0,g=void 0,h=[],i=void 0;za.resize(function(){i=b.offsetTop-50,h=[]}),I("#api").findAll("h1, h3").forEach(function(a){var b=void 0,c=void 0,f=void 0;a.is("h1")?(b=L("div",{"class":"sidebar-h2",html:a.text},d),e=c=L("div",{style:"display: none"},d)):(b=L("div",{"class":"sidebar-h3",html:a.text},e),c=e),za.resize(function(){f=a.offsetTop,h.push([f,b,c])}),b.on("click",function(){ja.scrollTo(f-75,1e3)})}),ja.on("scroll",function(b){var d=b.top;console.log("scroll",d,i),c.setClass("fixed",d>i);var e=a(d);e[1]!==f&&(f&&f.removeClass("active"),f=e[1],f.addClass("active")),e[2]!==g&&(g&&g.hide(),g=e[2],g&&g.show())}),za.resize()})}();